<!-- 
    keywords
    author

    files menu

    footer ??

    search bar, login, ecc ??
-->

<!DOCTYPE html>

<html lang="it">

<head>
  <meta charset="utf-8" />

  <title>Registrati - Second Read</title>

  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <script>
    var dettagli_form = {
      "inputNome": [
        "Nome",
        /^[A-Za-zàèùìòé\s]\w{2,20}$/,
        "Inserire un nome di lunghezza compresa tra i 2 e 20 caratteri"
      ],
      "inputCognome": [
        "Cognome",
        /^[A-Za-zàèùìòé\s]\w{2,20}$/,
        "Inserire un cognome di lunghezza compresa tra i 2 e 20 caratteri"
      ],
      "inputTelefono": [
        "Numero telefonico",
        /^[0-9]{10}$/,
        "Inserire un numero telefonico corretto"
      ],
      "inputDataNascita": [
        "Data di nascita",
        /^(19|20)\d\d[- /.](0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])$/,
        "Inserire un formato di data corretto",
        "Devi essere maggiorenne per utilizzare il nostro servizio!"
      ],
      "inputEmail": [
        "Indirizzo mail",
        /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,
        "Inserire un indirizzo mail corretto"
      ],
      "inputPassword": [
        "Password",
        /^(?!.*\s)(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[~`!@#$%^&*()--+={}\[\]|\\:;"'<>,.?/_₹]).{10,16}$/,
        "Inserire una password di almeno 8 caratteri, di cui: uno minuscolo, uno maiuscolo, un numero ed un carattere speciale"
      ],
      "inputConfermaPassword": [
        "Password",
        /^(?!.*\s)(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[~`!@#$%^&*()--+={}\[\]|\\:;"'<>,.?/_₹]).{10,16}$/,
        "Le due password non coincidono"
      ]
    };

    function caricamento() {
      for (var key in dettagli_form) {
        var input = document.getElementById(key);
        campoDefault(input);
        input.onfocus = function () {
          campoPerInput(this);
        };
        input.onblur = function () {
          validazioneCampo(this);
        };
      }
    }

    function campoDefault(input) {
      if (input.value == "") {
        input.value = dettagli_form[input.id][0];
      }
    }

    function campoPerInput(input) {
      if (input.value == dettagli_form[input.id][0]) {
        input.value = "";
      }
    }

    function validazioneCampo(input) {
      var padre = input.parentNode;

      if (padre.children.length == 2) {
        padre.removeChild(padre.children[1]);
      }

      if (input.id == "inputDataNascita") {
        if (input.value.search(dettagli_form[input.id][1]) != 0) {
          mostraErrore(input);
          input.focus();
          input.select();
          return false;
        }
        var today = new Date();
        var birthDate = new Date(input.value);
        var age = today.getFullYear() - birthDate.getFullYear();
        var m = today.getMonth() - birthDate.getMonth();
        if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
          age--;
        }
        if (age < 18) {
          console.log(input.value);
          mostraErrore(input, 1);
          input.focus();
          input.select();
          return false;
        }
      }


      if ((input.id != "inputConfermaPassword") && (input.value.search(dettagli_form[input.id][1]) != 0 || input.value == dettagli_form[input.id][0])) {
        input.focus();
        input.select();
        mostraErrore(input);
        return false;
      } else {
        if (input.id == "inputConfermaPassword" && input.value != document.getElementById("inputPassword").value) {
          mostraErrore(input);
          input.focus();
          input.select();
          return false;
        }
      }

      return true;
    }

    function mostraErrore(input, increment = 0) {
      var padre = input.parentNode;
      var errore = document.createElement("strong");
      errore.className = "errorSuggestion";
      errore.appendChild(document.createTextNode(dettagli_form[input.id][2 + increment]));
      padre.appendChild(errore);
    }

    function validazioneForm() {
      for (var key in dettagli_form) {
        var input = document.getElementById(key);
        if (!validazioneCampo(input)) {
          return false;
        }
        return true;
      }
    }

  </script>

  <!-- Segnaposto -->
  </linkSito>

</head>

<body onload="caricamento();">
  <!-- Segnaposto -->
  </headerSito>

  <nav id="breadcrumb">
    <p>Ti trovi in: <a lang="en" href="index.php">Home</a> &gt;&gt; Registrati</p>
  </nav>

  <nav id="menu">
    <ul>
      <li><a href="generi.php">Generi</a></li>
      <li><a href="bestseller.php">Bestseller</a></li>
      <li><a href="">Offerte</a></li>
    </ul>
  </nav>

  <div id="content">
    <form class="accediRegistrati" action="" method="post">
      <fieldset>
        <h2>Registrati</h2>

        <label for="inputNome">Nome</label>
        <span><input class="styleInput" id="inputNome" name="inputNome" type="text"></span>

        <label for="inputCognome">Cognome</label>
        <span><input class="styleInput" id="inputCognome" name="inputCognome" type="text"></span>

        <label for="inputTelefono">Telefono</label>
        <span><input class="styleInput" id="inputTelefono" name="inputTelefono" type="tel"></span>

        <label for="inputDataNascita">Data di Nascita</label>
        <span><input class="styleInput" id="inputDataNascita" name="inputDataNascita" type="date" min="1950-01-01"
            max="2022-12-31"></span>

        <label for="inputEmail">Email</label>
        <span><input class="styleInput" id="inputEmail" name="inputEmail" type="email"></span>

        <label for="inputPassword">Password</label>
        <span><input class="styleInput" id="inputPassword" name="inputPassword" type="password"></span>

        <label for="inputConfermaPassword">Conferma Password</label>
        <span><input class="styleInput ultimoInput" id="inputConfermaPassword" name="inputConfermaPassword"
            type="password"></span>

        <input type="submit" value="Accedi">
      </fieldset>
    </form>
  </div>

  <!-- Segnaposto -->
  </footerSito>
</body>

</html>